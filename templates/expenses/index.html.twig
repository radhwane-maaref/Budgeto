{% extends 'base.html.twig' %}

{% block title %}My Expenses
{% endblock %}

{% block body %}
	<div class="container-fluid d-flex flex-column min-vh-100">
		<div class="container mt-5 flex-grow-1">
			<div class="card shadow">
				<div class="card-header bg-light text-dark">
					<h2 class="mb-0">ðŸ“Š Expenses Tracker</h2>
				</div>
				<div class="card-body">
					<table class="table table-hover align-middle">
						<thead class="table-dark">
							<tr>

								<th>Amount (TND)</th>
								<th>Description</th>
								<th>Category</th>
								<th>Date</th>
								<th>Actions</th>
							</tr>
						</thead>
						<tbody>
							{% for expense in expenses %}
								<tr>

									<td>{{ expense.amount }}</td>
									<td>{{ expense.description }}</td>
									<td>{{ expense.category }}</td>
									<td>{{ expense.date ? expense.date|date('Y-m-d H:i') : '' }}</td>
									<td class="d-flex gap-2 align-items-center">
										<a href="{{ path('app_expenses_show', {'id': expense.id}) }}" class="btn btn-sm btn-outline-primary me-1">
											<i class="fas fa-eye"></i>
										</a>
										<a href="{{ path('app_expenses_edit', {'id': expense.id}) }}" class="btn btn-sm btn-outline-secondary me-1">
										<i class="fas fa-edit"></i>
									</a>

										<form method="post" action="{{ path('app_expenses_delete', {'id': expense.id}) }}" onsubmit="return confirm('Are you sure you want to delete this saving goal?');">
										<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ expense.id) }}">
										<button class="btn btn-sm btn-outline-danger">
											<i class="fas fa-trash"></i>
										</button>
									</form>

										
									</td>
								</tr>
							{% else %}
								<tr>
									<td colspan="6" class="text-center text-muted">No records found</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
				<div class="card-footer text-end">
					<a href="{{ path('app_expenses_new') }}" class="btn btn-success">âž• Add New Expense</a>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
